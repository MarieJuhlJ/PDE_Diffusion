# pde_diff

Repository for a Master Thesis focused on diffusion models with PDE constraints.

# ðŸš€ Experiments:

To train the model on the **Darcy dataset**, run:

```bash
python src/pde_diff/train.py dataset=darcy loss.name=darcy
```

To train the model on the **ERA5**, run:
```bash
1234
```

## Project structure

The directory structure of the project looks like this:
```txt
â”œâ”€â”€ .github/                  # Github actions and dependabot
â”‚   â”œâ”€â”€ dependabot.yaml
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ tests.yaml
â”œâ”€â”€ configs/                  # Configuration files
â”œâ”€â”€ data/                     # Data directory
â”‚   â”œâ”€â”€ processed
â”‚   â””â”€â”€ raw
â”œâ”€â”€ dockerfiles/              # Dockerfiles
â”‚   â”œâ”€â”€ api.Dockerfile
â”‚   â””â”€â”€ train.Dockerfile
â”œâ”€â”€ docs/                     # Documentation
â”‚   â”œâ”€â”€ mkdocs.yml
â”‚   â””â”€â”€ source/
â”‚       â””â”€â”€ index.md
â”œâ”€â”€ models/                   # Trained models
â”œâ”€â”€ notebooks/                # Jupyter notebooks
â”œâ”€â”€ reports/                  # Reports
â”‚   â””â”€â”€ figures/
â”œâ”€â”€ src/                      # Source code
â”‚   â”œâ”€â”€ project_name/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ api.py
â”‚   â”‚   â”œâ”€â”€ data.py
â”‚   â”‚   â”œâ”€â”€ evaluate.py
â”‚   â”‚   â”œâ”€â”€ models.py
â”‚   â”‚   â”œâ”€â”€ train.py
â”‚   â”‚   â””â”€â”€ visualize.py
â””â”€â”€ tests/                    # Tests
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_api.py
â”‚   â”œâ”€â”€ test_data.py
â”‚   â””â”€â”€ test_model.py
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .pre-commit-config.yaml
â”œâ”€â”€ LICENSE
â”œâ”€â”€ pyproject.toml            # Python project file
â”œâ”€â”€ README.md                 # Project README
â”œâ”€â”€ requirements.txt          # Project requirements
â”œâ”€â”€ requirements_dev.txt      # Development requirements
â””â”€â”€ tasks.py                  # Project tasks
```

## Prerequisites

Make sure you have the following installed on your system:

Conda (either Anaconda or Miniconda)

Python 3.8 or higher (managed via Conda)

## Step-by-Step Instructions

1. Clone the Repository

First, clone the repository to your local machine:

- ```git clone https://github.com/MarieJuhlJ/PDE_Diffusion.git```

- ```cd PDE_Diffusion```

2. Install Invoke

Install invoke using Conda or pip:

- ```conda install -c conda-forge invoke``` or ```pip install invoke```

You can verify the installation by running:

- ```invoke --version```

3. Create the Environment

This repository includes a custom create-environment function defined in the tasks.py file. Use invoke to create the environment by running:

- ```invoke create-environment```

This function will:

Create a Conda environment with the appropriate name "pde_diff" (specified in the script) of the current compatible python version, activate the environment and install invoke.

4. Install Requirements

Once the environment is set up, install additional Python dependencies using the requirements function. Activate the new environment and run the following command:

- ```invoke requirements```

This function will:

Install dependencies listed in the requirements.txt file (if applicable).

Note that windows users have to manually run the following commands:
- ```pip install -r requirements.txt```
- ```pip install -e .```

### For developers:
There are extra packages you need if you want to make changes to the project. You can install them using the `requirements_dev.txt` by invoking the task `dev_requirements"`:

```invoke dev-requirements```

or installing `requirements_dev.txt` directly with pip:

```pip install -r requirements_dev.txt```

To use pre-commit checks run the following line:
- ```pre-commit install```


Created using [mlops_template](https://github.com/SkafteNicki/mlops_template),
a [cookiecutter template](https://github.com/cookiecutter/cookiecutter) for getting
started with Machine Learning Operations (MLOps).
